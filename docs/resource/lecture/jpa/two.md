---
title: 2. 다양한 연관관계 매핑
sidebar_position: 2
---
## 연관관계 매핑시 고려사항

- 다중성
  - @ManyToOne
  - @OneToMany
  - @OneToOne
  - @ManyToMany
    - 실무에서 쓰면 안 된다.
- 단방향, 양방향
  - 기본적으로 단방향으로 구현
  - 역탐색이 필요한 경우에만 양방향
- 연관관계의 주인
  - 외래키를 가진 쪽을 주인으로!


## 읽기 전용 필드로 만들기

- 1:N 관계는 왠만하면 N:1 관계로 변환하는 것이 좋다. (연관관계의 주인이 N에 있는 구조)
- 하지만 꼭 필요하다면 두 객체 모두 연관관계의 주인이 되도록 설정한 후
- N쪽 필드에 @JoinColumn(insertable=false, updatable=false)를 달아 읽기 전용으로 변환


## 일대일 관계

- 주 테이블이나 대상 테이블 중에 외래키 선택이 가능하다.
- 외래키에 DB 유니크 제약조건을 추가해야 한다.
- 외래키가 있는 곳이 연관관계의 주인. 반대편은 mappedby 적용


## 다대다 관계는 피할 것!

- RDB는 정규화된 테이블 2개로 다대다 관계를 표현할 수 없음 => 연결 테이블을 추가해서 1:N, N:1로 풀어낼 것

- 객체는 컬렉션을 사용해서 객체 2개로 다대다 관계 표현 가능

  - 단, 객체 다대다 관계에서 중간 테이블은 연결의 역할만 한다.
  - 하지만 실무에서 중간 테이블은 연결의 역할만 하지 않는다.
  - 때문에 객체 다대다 관계는 실무의 중간 테이블을 정확히 풀어내지 못한다.
