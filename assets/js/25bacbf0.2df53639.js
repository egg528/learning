"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[3874],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(n),m=a,k=c["".concat(l,".").concat(m)]||c[m]||d[m]||s;return n?r.createElement(k,o(o({ref:t},u),{},{components:n})):r.createElement(k,o({ref:t},u))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,o=new Array(s);o[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var p=2;p<s;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3448:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const s={title:"API Routes",tag:["Next.js"]},o=void 0,i={unversionedId:"frontend/nextjs/API-Routes",id:"frontend/nextjs/API-Routes",title:"API Routes",description:"\uae00 \ub9c1\ud06c",source:"@site/docs/tech/frontend/nextjs/API-Routes.md",sourceDirName:"frontend/nextjs",slug:"/frontend/nextjs/API-Routes",permalink:"/lecture/frontend/nextjs/API-Routes",draft:!1,tags:[],version:"current",frontMatter:{title:"API Routes",tag:["Next.js"]},sidebar:"tutorialSidebar",previous:{title:"repacks/next-pack",permalink:"/lecture/frontend/library/repack-next-pack"},next:{title:"Custom Document",permalink:"/lecture/frontend/nextjs/Custom-Document"}},l={},p=[{value:"\uae00 \ub9c1\ud06c",id:"\uae00-\ub9c1\ud06c",level:2},{value:"\ub0b4\uc6a9 \uc815\ub9ac",id:"\ub0b4\uc6a9-\uc815\ub9ac",level:2},{value:"API Routes\ub780?",id:"api-routes\ub780",level:3},{value:"\uc0dd\uc131 \ubc29\ubc95",id:"\uc0dd\uc131-\ubc29\ubc95",level:4},{value:"\uc8fc\uc758\ud560 \uc810",id:"\uc8fc\uc758\ud560-\uc810",level:4},{value:"NextRequest",id:"nextrequest",level:3},{value:"Custom config",id:"custom-config",level:4},{value:"bodyParser",id:"bodyparser",level:5},{value:"NextRequest / NextResponse \uc0c1\uc18d",id:"nextrequest--nextresponse-\uc0c1\uc18d",level:4},{value:"NextApiResponse",id:"nextapiresponse",level:3},{value:"\uae30\ub2a5\ub4e4",id:"\uae30\ub2a5\ub4e4",level:4},{value:"TypeScript type \ucd94\uac00",id:"typescript-type-\ucd94\uac00",level:4},{value:"Dynamic API Routes",id:"dynamic-api-routes",level:3},{value:"\ud30c\uc77c\uba85 - \ub9e4\uce6d path \uc815\ub9ac",id:"\ud30c\uc77c\uba85---\ub9e4\uce6d-path-\uc815\ub9ac",level:4},{value:"Edges API Routes",id:"edges-api-routes",level:3},{value:"JSON Response \uc608\uc2dc",id:"json-response-\uc608\uc2dc",level:4},{value:"Cache-Control \uc608\uc2dc",id:"cache-control-\uc608\uc2dc",level:4},{value:"Query Parameter \uc0ac\uc6a9 \uc608\uc2dc",id:"query-parameter-\uc0ac\uc6a9-\uc608\uc2dc",level:4},{value:"Forwarding Headers \uc608\uc2dc",id:"forwarding-headers-\uc608\uc2dc",level:4}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\uae00-\ub9c1\ud06c"},"\uae00 \ub9c1\ud06c"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://nextjs.org/docs/pages/building-your-application/routing/api-routes"},"API Routes"))),(0,a.kt)("h2",{id:"\ub0b4\uc6a9-\uc815\ub9ac"},"\ub0b4\uc6a9 \uc815\ub9ac"),(0,a.kt)("h3",{id:"api-routes\ub780"},"API Routes\ub780?"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { NextApiRequest, NextApiResponse } from 'next'\n\ntype Data = {\n  name: string\n}\n\nexport default function handler(\n  req: NextApiRequest,\n  res: NextApiResponse<Data>\n) {\n  res.status(200).json({ name: 'John Doe' })\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Next.js\ub85c API\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub294 \uc194\ub8e8\uc158\uc774\ub2e4."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"pages/api")," \ud3f4\ub354 \ub0b4\ubd80\uc5d0 \ubaa8\ub4e0 \ud30c\uc77c\uc740 ",(0,a.kt)("inlineCode",{parentName:"li"},"/api/*"),"\ub85c \ub9e4\ud551\ub428\uacfc \ub3d9\uc2dc\uc5d0 page\uac00 \uc544\ub2cc API endpoint\ub85c \uc5ec\uaca8\uc9c4\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\ub54c\ubb38\uc5d0 pages/api \ub0b4\ubd80 \ud30c\uc77c\ub4e4\uc740 client-side bundle \uc0ac\uc774\uc988\uc640 \ubb34\uad00\ud558\ub2e4. (\uc0ac\uc6a9\uc790\ub4e4\uc5d0\uac8c \uc804\uc1a1\ud558\ub294 pages\ub4e4\uacfc\ub294 \ubb34\uad00)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://nextjs.org/docs/pages/api-reference/next-config-js/pageExtensions"},"pageExtensions configuration"),"\uc744 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4")),(0,a.kt)("h4",{id:"\uc0dd\uc131-\ubc29\ubc95"},"\uc0dd\uc131 \ubc29\ubc95"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc704 \uc608\uc2dc\uc5d0\uc11c \ucc98\ub7fc NextApiRequest\uc640 NextApiResponse\ub97c \ud30c\ub77c\ubbf8\ud130\ub85c \ubc1b\ub294 function\uc744 export\ud574\uc57c \ud55c\ub2e4. "),(0,a.kt)("li",{parentName:"ul"},"\ud568\uc218 \uba85\uc740 \uc790\uc720\ub86d\uac8c \uc791\uc131\ud560 \uc218 \uc788\uace0 path\uc640\ub294 \uad00\uacc4 \uc5c6\ub2e4.")),(0,a.kt)("h4",{id:"\uc8fc\uc758\ud560-\uc810"},"\uc8fc\uc758\ud560 \uc810"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"CORS\uc5d0 \ub300\ud55c \uc124\uc815\uc774 \ub418\uc5b4 \uc788\uc9c0 \uc54a\uc544 SOP\ub97c \ub530\ub978\ub2e4. ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/vercel/next.js/tree/canary/examples/api-routes-cors"},"(CORS \uc124\uc815 \uc608\uc2dc)")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://nextjs.org/docs/pages/building-your-application/deploying/static-exports"},"static export"),"\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc74c")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"nextrequest"},"NextRequest"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Next.js\ub294 incomming request\ub97c parsing\ud55c NextRequest\ub97c \uc81c\uacf5\ud55c\ub2e4.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"cookies, query, body \ud544\ub4dc\ub97c \ud1b5\ud574 cookie, query string, body \uc815\ubcf4\ub97c \uc5bb\uc744 \uc218 \uc788\ub2e4.")))),(0,a.kt)("h4",{id:"custom-config"},"Custom config"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export const config = {\n  api: {\n    bodyParser: {\n      sizeLimit: '1mb',\n    },\n  },\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uac01 API endpoint\ub9c8\ub2e4 config\ub97c export\ud558\uc5ec api configuration\uc744 custom\ud560 \uc218 \uc788\ub2e4.")),(0,a.kt)("h5",{id:"bodyparser"},"bodyParser"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export const config = {\n  api: {\n    bodyParser: false,\n  },\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"bodyParser \uae30\ub2a5\uc740 \uae30\ubcf8\uc801\uc73c\ub85c true\uc774\uae30 \ub54c\ubb38\uc5d0 Stream \ud639\uc740 raw-body\ub85c \ubc1b\uace0 \uc2f6\ub2e4\uba74 false \uc124\uc815\uc744 \ud574\uc918\uc57c \ud55c\ub2e4.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// sizeLimit\nexport const config = {\n    api: {\n        bodyParser: {\n            sizeLimit: '500kb',\n        },\n    },\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"parsing\ub41c body\uc758 \uc6a9\ub7c9\uc744 \uc81c\ud55c\ud560 \ub54c \uc0ac\uc6a9\ud55c\ub2e4.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// externalResolver\nexport const config = {\n    api: {\n        bodyParser: {\n            externalResolver: true,\n        },\n    },\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"express\uc640 \uac19\uc740 \uc678\ubd80 resolver\uc5d0 \uc758\ud574 \ub3d9\uc791\ud55c\ub2e4\uace0 \uba85\uc2dc\ud574\uc8fc\ub294 \uc77c\uc885\uc758 flag"),(0,a.kt)("li",{parentName:"ul"},"\uc124\uc815\ud55c API\uc758 \uacbd\uc6b0 unresolved requests\uc5d0 \ub300\ud55c \uacbd\uace0\uac00 \uc0ac\ub77c\uc9c4\ub2e4")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// responseLimit\nexport const config = {\n    api: {\n        responseLimit: '8mb',\n    },\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub9d0 \uadf8\ub300\ub85c response \uc6a9\ub7c9\uc5d0 \uc81c\ud55c\uc744 \ub450\ub294 \uac83 (default\ub294 4MB)")),(0,a.kt)("h4",{id:"nextrequest--nextresponse-\uc0c1\uc18d"},"NextRequest / NextResponse \uc0c1\uc18d"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"// util/cokies.ts\nimport { serialize, CookieSerializeOptions } from 'cookie'\nimport { NextApiResponse } from 'next'\n \n/**\n * This sets `cookie` using the `res` object\n */\nexport const setCookie = (\n  res: NextApiResponse,\n  name: string,\n  value: unknown,\n  options: CookieSerializeOptions = {}\n) => {\n  const stringValue =\n    typeof value === 'object' ? 'j:' + JSON.stringify(value) : String(value)\n \n  if (typeof options.maxAge === 'number') {\n    options.expires = new Date(Date.now() + options.maxAge * 1000)\n  }\n \n  res.setHeader('Set-Cookie', serialize(name, stringValue, options))\n}\n\n\n// pages/api/cokies.ts\nimport { NextApiRequest, NextApiResponse } from 'next'\nimport { setCookie } from '../../utils/cookies'\n\nconst handler = (req: NextApiRequest, res: NextApiResponse) => {\n    // Calling our pure function using the `res` object, it will add the `set-cookie` header\n    // Add the `set-cookie` header on the main domain and expire after 30 days\n    setCookie(res, 'Next.js', 'api-middleware!', { path: '/', maxAge: 2592000 })\n    // Return the `set-cookie` header so we can display it in the browser and show that it works!\n    res.end(res.getHeader('Set-Cookie'))\n}\n\nexport default handler\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uae30\ubcf8\uc801\uc73c\ub85c \uc0c1\uc18d\uc744 \uad8c\ud558\uc9c0 \uc54a\uace0 function\uc744 \uc774\uc6a9\ud574 Header\uc5d0 \ub370\uc774\ud130\ub97c \ucd94\uac00\ud558\ub294 \ubc29\uc2dd\uc744 \uad8c\uc7a5\ud55c\ub2e4.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { NextApiRequest, NextApiResponse } from 'next'\nimport { withFoo } from 'external-lib-foo'\n \ntype NextApiRequestWithFoo = NextApiRequest & {\n  foo: (bar: string) => void\n}\n \nconst handler = (req: NextApiRequestWithFoo, res: NextApiResponse) => {\n  req.foo('bar') // we can now use `req.foo` without type errors\n  res.end('ok')\n}\n \nexport default withFoo(handler)\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uaf2d \uc0c1\uc18d\uc744 \ud574\uc57c\ud55c\ub2e4\uba74 \ucd94\uac00 \uc18d\uc131\uc744 \uac00\uc9c4 type\uc744 \ub9cc\ub4e4\uc5b4\uc918\uc57c \ud55c\ub2e4 (NextApiRequestWithFoo)"),(0,a.kt)("li",{parentName:"ul"},"\ub2e8, withFoo()\uac00 \uc0ad\uc81c\ub418\uc5b4\ub3c4 \ucef4\ud30c\uc77c\uc774 \uc815\uc0c1 \ub3d9\uc791\ud55c\ub2e4\ub294 \uc810\uc744 \uc870\uc2ec\ud558\uc790")),(0,a.kt)("h3",{id:"nextapiresponse"},"NextApiResponse"),(0,a.kt)("h4",{id:"\uae30\ub2a5\ub4e4"},"\uae30\ub2a5\ub4e4"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export default function handler(req, res) {\n  res.status(200).json({ message: 'Hello from Next.js!' })\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"response.status(code): \uc0c1\ud0dc \ucf54\ub4dc \uc124\uc815")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export default async function handler(req, res) {\n  try {\n    const result = await someAsyncOperation()\n    res.status(200).json({ result })\n  } catch (err) {\n    res.status(500).json({ error: 'failed to load data' })\n  }\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"response.json(body): JSON \ud615\ud0dc\ub85c response \uc804\uc1a1 (\ub2e8, body\ub294 serializable object\uc5ec\uc57c \ud55c\ub2e4)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export default async function handler(req, res) {\n  try {\n    const result = await someAsyncOperation()\n    res.status(200).send({ result })\n  } catch (err) {\n    res.status(500).send({ error: 'failed to fetch data' })\n  }\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"response.send(body): string, object, Buffer \ud615\ud0dc\ub85c response \uc804\uc1a1")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export default async function handler(req, res) {\n  const { name, message } = req.body\n  try {\n    await handleFormInputAsync({ name, message })\n    res.redirect(307, '/')\n  } catch (err) {\n    res.status(500).send({ error: 'failed to fetch data' })\n  }\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"response.redirect(","[status]",", path): \ud2b9\uc815 \uacbd\ub85c\ub85c redirect\ud55c\ub2e4. status\ub294 HTTP status code\uc5ec\uc57c \ud558\uba74 \ud2b9\uc815\ub418\uc9c0 \uc54a\uc744 \uc2dc 307\uc774 \uae30\ubcf8\uac12\uc774\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"response.revalidate(urlPath): getStaticProps\ub97c \uc0ac\uc6a9\ud558\uc5ec page\uc758 \uc720\ud6a8\uc131\uc744 \uc81c\uac80\ud1a0\ud55c\ub2e4. (ISR Rendering \uac1c\ub150)")),(0,a.kt)("h4",{id:"typescript-type-\ucd94\uac00"},"TypeScript type \ucd94\uac00"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"import type { NextApiRequest, NextApiResponse } from 'next'\n \ntype ResponseData = {\n  message: string\n}\n \nexport default function handler(\n  req: NextApiRequest,\n  res: NextApiResponse<ResponseData>\n) {\n  res.status(200).json({ message: 'Hello from Next.js!' })\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Request\uc640 Response\uc5d0 Type\uc744 \ucd94\uac00\ud558\uc5ec type-safe\ud558\uac8c \ub370\uc774\ud130\ub97c \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4.")),(0,a.kt)("h3",{id:"dynamic-api-routes"},"Dynamic API Routes"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// pages/api/post/[pid].js\nexport default function handler(\n    req: NextApiRequest,\n    res: NextApiResponse\n) {\n  const { pid } = req.query\n  res.end(`Post: ${pid}`)\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"NextApiRequest\uc758 query \ud544\ub4dc\ub97c \ud1b5\ud574 query string \uc811\uadfc \uac00\ub2a5"),(0,a.kt)("li",{parentName:"ul"},"page Dynamic API Routes\uc640 \uc720\uc0ac\ud558\ub2e4")),(0,a.kt)("h4",{id:"\ud30c\uc77c\uba85---\ub9e4\uce6d-path-\uc815\ub9ac"},"\ud30c\uc77c\uba85 - \ub9e4\uce6d path \uc815\ub9ac"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"pages/api/post/","[pid]",".js -> api/post/1, api/post/2, api/post/3"),(0,a.kt)("li",{parentName:"ul"},"pages/api/post/","[...pid]",".js -> api/post/1, api/post/1/2, api/post/1/2/3 ..."),(0,a.kt)("li",{parentName:"ul"},"pages/api/post/[","[...pid]","].js -> api/post, api/post/1, api/post/1/2, api/post/1/2/3 ...")),(0,a.kt)("h3",{id:"edges-api-routes"},"Edges API Routes"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export const config = {\n  runtime: 'edge',\n}\n \nexport default (req) => new Response('Hello world!')\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Node.js API\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \ub300\uc2e0 \ub192\uc740 \uc131\ub2a5\uc744 \ub0b4\ub294 \uc194\ub8e8\uc158"),(0,a.kt)("li",{parentName:"ul"},"API Routes\uac00 Node.js runtime\uc744 \uc0ac\uc6a9\ud558\ub294 \ubc18\uba74 Edge API\ub294 Edge Runtime\uc744 \uc0ac\uc6a9\ud55c\ub2e4.")),(0,a.kt)("h4",{id:"json-response-\uc608\uc2dc"},"JSON Response \uc608\uc2dc"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"import type { NextRequest } from 'next/server'\n \nexport const config = {\n  runtime: 'edge',\n}\n \nexport default async function handler(req: NextRequest) {\n  return new Response(\n    JSON.stringify({\n      name: 'Jim Halpert',\n    }),\n    {\n      status: 200,\n      headers: {\n        'content-type': 'application/json',\n      },\n    }\n  )\n}\n")),(0,a.kt)("h4",{id:"cache-control-\uc608\uc2dc"},"Cache-Control \uc608\uc2dc"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"import type { NextRequest } from 'next/server'\n \nexport const config = {\n  runtime: 'edge',\n}\n \nexport default async function handler(req: NextRequest) {\n  return new Response(\n    JSON.stringify({\n      name: 'Jim Halpert',\n    }),\n    {\n      status: 200,\n      headers: {\n        'content-type': 'application/json',\n        'cache-control': 'public, s-maxage=1200, stale-while-revalidate=600',\n      },\n    }\n  )\n}\n")),(0,a.kt)("h4",{id:"query-parameter-\uc0ac\uc6a9-\uc608\uc2dc"},"Query Parameter \uc0ac\uc6a9 \uc608\uc2dc"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"import type { NextRequest } from 'next/server'\n \nexport const config = {\n  runtime: 'edge',\n}\n \nexport default async function handler(req: NextRequest) {\n  const { searchParams } = new URL(req.url)\n  const email = searchParams.get('email')\n  return new Response(email)\n}\n")),(0,a.kt)("h4",{id:"forwarding-headers-\uc608\uc2dc"},"Forwarding Headers \uc608\uc2dc"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"import { type NextRequest } from 'next/server'\n \nexport const config = {\n  runtime: 'edge',\n}\n \nexport default async function handler(req: NextRequest) {\n  const authorization = req.cookies.get('authorization')?.value\n  return fetch('https://backend-api.com/api/protected', {\n    method: req.method,\n    headers: {\n      authorization,\n    },\n    redirect: 'manual',\n  })\n}\n")))}d.isMDXComponent=!0}}]);