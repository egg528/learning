"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5833],{3905:(e,t,a)=>{a.d(t,{Zo:()=>o,kt:()=>m});var r=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,r,l=function(e,t){if(null==e)return{};var a,r,l={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var u=r.createContext({}),p=function(e){var t=r.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},o=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},k="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,l=e.mdxType,n=e.originalType,u=e.parentName,o=c(e,["components","mdxType","originalType","parentName"]),k=p(a),d=l,m=k["".concat(u,".").concat(d)]||k[d]||s[d]||n;return a?r.createElement(m,i(i({ref:t},o),{},{components:a})):r.createElement(m,i({ref:t},o))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var n=a.length,i=new Array(n);i[0]=d;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c[k]="string"==typeof e?e:l,i[1]=c;for(var p=2;p<n;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8756:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>s,frontMatter:()=>n,metadata:()=>c,toc:()=>p});var r=a(7462),l=(a(7294),a(3905));const n={title:"Batch Performance \uadf9\ud55c\uc73c\ub85c \ub04c\uc5b4\uc62c\ub9ac\uae30",tag:["backend","spring","batch","performance"]},i=void 0,c={unversionedId:"web/backend/spring/Batch-Performance-\uadf9\ud55c\uc73c\ub85c-\ub04c\uc5b4\uc62c\ub9ac\uae30",id:"web/backend/spring/Batch-Performance-\uadf9\ud55c\uc73c\ub85c-\ub04c\uc5b4\uc62c\ub9ac\uae30",title:"Batch Performance \uadf9\ud55c\uc73c\ub85c \ub04c\uc5b4\uc62c\ub9ac\uae30",description:"\uc601\uc0c1 \ub9c1\ud06c",source:"@site/docs/resource/web/backend/spring/Batch-Performance-\uadf9\ud55c\uc73c\ub85c-\ub04c\uc5b4\uc62c\ub9ac\uae30.md",sourceDirName:"web/backend/spring",slug:"/web/backend/spring/Batch-Performance-\uadf9\ud55c\uc73c\ub85c-\ub04c\uc5b4\uc62c\ub9ac\uae30",permalink:"/resource/web/backend/spring/Batch-Performance-\uadf9\ud55c\uc73c\ub85c-\ub04c\uc5b4\uc62c\ub9ac\uae30",draft:!1,tags:[],version:"current",frontMatter:{title:"Batch Performance \uadf9\ud55c\uc73c\ub85c \ub04c\uc5b4\uc62c\ub9ac\uae30",tag:["backend","spring","batch","performance"]},sidebar:"tutorialSidebar",previous:{title:"N+1 \ubb38\uc81c",permalink:"/resource/web/backend/jpa/N1\ubb38\uc81c"},next:{title:"Cache Abstraction",permalink:"/resource/web/backend/spring/Cache-Abstraction"}},u={},p=[{value:"\uc601\uc0c1 \ub9c1\ud06c",id:"\uc601\uc0c1-\ub9c1\ud06c",level:2},{value:"\ub0b4\uc6a9 \uc815\ub9ac",id:"\ub0b4\uc6a9-\uc815\ub9ac",level:2},{value:"1. When (Batch\ub294 \uc5b8\uc81c \uc0ac\uc6a9\ud558\ub294\uac00?)",id:"1-when-batch\ub294-\uc5b8\uc81c-\uc0ac\uc6a9\ud558\ub294\uac00",level:3},{value:"2. \ub300\ub7c9 \ub370\uc774\ud130 READ",id:"2-\ub300\ub7c9-\ub370\uc774\ud130-read",level:3},{value:"ChunkProcessing",id:"chunkprocessing",level:4},{value:"\ubb38\uc81c\uc810",id:"\ubb38\uc81c\uc810",level:5},{value:"\ud574\uacb0\ucc45 1",id:"\ud574\uacb0\ucc45-1",level:5},{value:"\ud574\uacb0\ucc45 2",id:"\ud574\uacb0\ucc45-2",level:5},{value:"\ud574\uacb0\ucc45 3(13:35)",id:"\ud574\uacb0\ucc45-31335",level:5},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:5},{value:"3. \ub370\uc774\ud130 Aggregation \ucc98\ub9ac",id:"3-\ub370\uc774\ud130-aggregation-\ucc98\ub9ac",level:3},{value:"\ubb38\uc81c\uc810",id:"\ubb38\uc81c\uc810-1",level:5},{value:"\ud574\uacb0\ucc45 1 -&gt; GroupBy\ub97c \ud3ec\uae30\ud558\uc790 (\uc9c1\uc811 Aggregation \ud558\uc790)",id:"\ud574\uacb0\ucc45-1---groupby\ub97c-\ud3ec\uae30\ud558\uc790-\uc9c1\uc811-aggregation-\ud558\uc790",level:5},{value:"\ub610 \ub2e4\ub978 \ubb38\uc81c\uc810",id:"\ub610-\ub2e4\ub978-\ubb38\uc81c\uc810",level:5},{value:"\ub610 \ub2e4\ub978 \ud574\uacb0\ucc45",id:"\ub610-\ub2e4\ub978-\ud574\uacb0\ucc45",level:5},{value:"4. \ud6a8\uacfc\uc801\uc778 \ub300\ub7c9 \ub370\uc774\ud130 WRITE",id:"4-\ud6a8\uacfc\uc801\uc778-\ub300\ub7c9-\ub370\uc774\ud130-write",level:3},{value:"5. Batch \uad6c\ub3d9 \ud658\uacbd",id:"5-batch-\uad6c\ub3d9-\ud658\uacbd",level:3},{value:"\ubb38\uc81c\uc810",id:"\ubb38\uc81c\uc810-2",level:4},{value:"\ud574\uacb0 \ubc29\ubc95: Spring Cloud Data Flow",id:"\ud574\uacb0-\ubc29\ubc95-spring-cloud-data-flow",level:4}],o={toc:p},k="wrapper";function s(e){let{components:t,...n}=e;return(0,l.kt)(k,(0,r.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\uc601\uc0c1-\ub9c1\ud06c"},"\uc601\uc0c1 \ub9c1\ud06c"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=2IIwQDIi3ys"},"Batch Performance \uadf9\ud55c\uc73c\ub85c \ub04c\uc5b4\uc62c\ub9ac\uae30: 1\uc5b5 \uac74 \ub370\uc774\ud130 \ucc98\ub9ac\ub97c \uc704\ud55c \ub178\ub825 / if(kakao)dev2022"))),(0,l.kt)("h2",{id:"\ub0b4\uc6a9-\uc815\ub9ac"},"\ub0b4\uc6a9 \uc815\ub9ac"),(0,l.kt)("h3",{id:"1-when-batch\ub294-\uc5b8\uc81c-\uc0ac\uc6a9\ud558\ub294\uac00"},"1. When (Batch\ub294 \uc5b8\uc81c \uc0ac\uc6a9\ud558\ub294\uac00?)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ud2b9\uc815 \uc2dc\uac04\uc5d0 \ub9ce\uc740 \ub370\uc774\ud130\ub97c \uc77c\uad04 \ucc98\ub9ac\ud560 \ub54c"),(0,l.kt)("li",{parentName:"ul"},"\ud06c\uac8c 3\uac00\uc9c0",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc77c\uad04 \uc0dd\uc131 (READ - CREATE - WRITE)"),(0,l.kt)("li",{parentName:"ul"},"\uc77c\uad04 \uc218\uc815 (READ - UPDATE - WRITE)"),(0,l.kt)("li",{parentName:"ul"},"\ud1b5\uacc4 (SUM READ - CREATE - WRITE)")))),(0,l.kt)("h3",{id:"2-\ub300\ub7c9-\ub370\uc774\ud130-read"},"2. \ub300\ub7c9 \ub370\uc774\ud130 READ"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ub300\uac1c Reader\uac00 \ud070 \ube44\uc911\uc744 \ucc28\uc9c0\ud558\uace0 \uc788\uc74c (\ubcf5\uc7a1\ud55c \uc870\ud68c \ub85c\uc9c1 \ub54c\ubb38\uc5d0)")),(0,l.kt)("h4",{id:"chunkprocessing"},"ChunkProcessing"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ub098\ub204\uc5b4 \ucc98\ub9ac\ud558\ub294 \ubc29\uc2dd"),(0,l.kt)("li",{parentName:"ul"},"\ub300\ub7c9 \uac74\uc744 \ucc98\ub9ac\ud560 \ub54c \ud544\uc218\uc801\uc774\ub2e4.")),(0,l.kt)("h5",{id:"\ubb38\uc81c\uc810"},"\ubb38\uc81c\uc810"),(0,l.kt)("p",null," ",(0,l.kt)("img",{alt:"kakao-batch1.png",src:a(8035).Z,width:"1908",height:"956"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\uae30\ubcf8\uc801\uc73c\ub85c limit Offset\uc744 \uc0ac\uc6a9\ud55c\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\ud558\uc9c0\ub9cc Offset\uc774 \ucee4\uc9c8\uc218\ub85d \uad49\uc7a5\ud788 \ub290\ub824\uc9c4\ub2e4.")),(0,l.kt)("h5",{id:"\ud574\uacb0\ucc45-1"},"\ud574\uacb0\ucc45 1"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"kakao-batch2.png",src:a(7533).Z,width:"1960",height:"1000"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Offset\uc744 0\uc73c\ub85c \uc720\uc9c0\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c Query \uc0ac\uc6a9")),(0,l.kt)("h5",{id:"\ud574\uacb0\ucc45-2"},"\ud574\uacb0\ucc45 2"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"kakao-batch3.png",src:a(7958).Z,width:"1974",height:"958"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Cursor\ub97c \uc0ac\uc6a9\ud560 \uac83"),(0,l.kt)("li",{parentName:"ul"},"Cursor \uc9c0\uc6d0 ItemReader",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"JdbcCursorItemReader"),(0,l.kt)("li",{parentName:"ul"},"HibernateCursorItemReader")))),(0,l.kt)("h5",{id:"\ud574\uacb0\ucc45-31335"},"\ud574\uacb0\ucc45 3(13:35)"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"kakao-batch4.png",src:a(6614).Z,width:"1940",height:"958"})),(0,l.kt)("h5",{id:"\uc815\ub9ac"},"\uc815\ub9ac"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"kakao-batch5.png",src:a(140).Z,width:"1946",height:"1056"})),(0,l.kt)("h3",{id:"3-\ub370\uc774\ud130-aggregation-\ucc98\ub9ac"},"3. \ub370\uc774\ud130 Aggregation \ucc98\ub9ac"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ud1b5\uacc4\ub97c \ub9cc\ub4e4 \ub54c \ub300\ubd80\ubd84 Batch\ub85c \uac1c\ubc1c\uc744 \uc0dd\uac01\ud55c\ub2e4. (GroupBy & Sum)"),(0,l.kt)("li",{parentName:"ul"},"\ud558\uc9c0\ub9cc, \ub370\uc774\ud130\uac00 \ub9ce\uc544\uc9c0\uace0 \ucffc\ub9ac\uac00 \ubcf5\uc7a1\ud574\uc838\ub3c4 \ubb38\uc81c\uac00 \uc5c6\uc744\uae4c?")),(0,l.kt)("h5",{id:"\ubb38\uc81c\uc810-1"},"\ubb38\uc81c\uc810"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"kakao-batch6.png",src:a(8229).Z,width:"1958",height:"984"})),(0,l.kt)("h5",{id:"\ud574\uacb0\ucc45-1---groupby\ub97c-\ud3ec\uae30\ud558\uc790-\uc9c1\uc811-aggregation-\ud558\uc790"},"\ud574\uacb0\ucc45 1 -> GroupBy\ub97c \ud3ec\uae30\ud558\uc790 (\uc9c1\uc811 Aggregation \ud558\uc790)"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"kakao-batch7.png",src:a(2714).Z,width:"1988",height:"1094"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Aggregation\uc744 \uc9c1\uc811\ud558\uae30 \uc704\ud574\uc11c\ub294 App\uc5d0 \ub300\uc6a9\ub7c9 \ub370\uc774\ud130\ub97c \uc9c1\uc811 \uc62c\ub824\uc57c \ud55c\ub2e4..."),(0,l.kt)("li",{parentName:"ul"},"\ub54c\ubb38\uc5d0 Redis\ub97c \ud65c\uc6a9!"),(0,l.kt)("li",{parentName:"ul"},"\uadfc\uac70",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc5f0\uc0b0 \uba85\ub839\uc5b4 \uc9c0\uc6d0"),(0,l.kt)("li",{parentName:"ul"},"50\ub9cc\uac1c\ub294 \ub109\ub109\ud788 \uc800\uc7a5 \uac00\ub2a5"),(0,l.kt)("li",{parentName:"ul"},"\ube60\ub978 \uc800\uc7a5 + \uc601\uad6c \uc800\uc7a5 X -> Aggregation\uc6a9\uc73c\ub85c \uc801\ud569")))),(0,l.kt)("h5",{id:"\ub610-\ub2e4\ub978-\ubb38\uc81c\uc810"},"\ub610 \ub2e4\ub978 \ubb38\uc81c\uc810"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"kakao-batch8.png",src:a(5330).Z,width:"1926",height:"1008"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ub300\uc6a9\ub7c9 \uac74\uc744 \ubaa8\ub450 App\uc5d0 \uc62c\ub9ac\uc9c0\ub294 \uc54a\uc9c0\ub9cc"),(0,l.kt)("li",{parentName:"ul"},"\ubaa8\ub4e0 \uac74\ubcc4\ub85c \ub124\ud2b8\uc6cc\ud06c I/O\uac00 \ubc1c\uc0dd\ud55c\ub2e4")),(0,l.kt)("h5",{id:"\ub610-\ub2e4\ub978-\ud574\uacb0\ucc45"},"\ub610 \ub2e4\ub978 \ud574\uacb0\ucc45"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Redis Pipeline \uac1c\ubc1c"),(0,l.kt)("li",{parentName:"ul"},"Chunk\ub2f9 1\ubc88 Redis\uc5d0 \uc694\uccad\uc744 \ubcf4\ub0c4")),(0,l.kt)("h3",{id:"4-\ud6a8\uacfc\uc801\uc778-\ub300\ub7c9-\ub370\uc774\ud130-write"},"4. \ud6a8\uacfc\uc801\uc778 \ub300\ub7c9 \ub370\uc774\ud130 WRITE"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Writer\ub97c \uac1c\uc120\ud560 \ub54c \uace0\ub824\uc0ac\ud56d"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"\uc77c\uad04\ub85c \ucffc\ub9ac \uc694\uccad"),(0,l.kt)("li",{parentName:"ol"},"\uba85\uc2dc\uc801\uc778 \ucffc\ub9ac \uc694\uccad (\ud544\uc694\ud55c \uceec\ub7fc\ub9cc Update / \uc601\uc18d\uc131 \ucee8\ud14d\uc2a4\ud2b8 \uc0ac\uc6a9 X)"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"JPA\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc740 \uc774\uc720"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc77d\uae30 / \uc4f0\uae30 \uad6c\uac04\uc774 \uc815\ud574\uc9c4 Batch\uc5d0\uc11c\ub294 Drity Checking\uacfc \uc601\uc18d\uc131 \uad00\ub9ac\ub294 \ud544\uc694\ud558\uc9c0 \uc54a\uc740 \uae30\ub2a5\uc784."),(0,l.kt)("li",{parentName:"ul"},"Update\ud560 \ub54c \ubd88\ud544\uc694\ud55c \uceec\ub7fc\ub3c4 Update"),(0,l.kt)("li",{parentName:"ul"},"Batch Insert \uc9c0\uc6d0\uc774 \uc5b4\ub824\uc6c0")))),(0,l.kt)("h3",{id:"5-batch-\uad6c\ub3d9-\ud658\uacbd"},"5. Batch \uad6c\ub3d9 \ud658\uacbd"),(0,l.kt)("h4",{id:"\ubb38\uc81c\uc810-2"},"\ubb38\uc81c\uc810"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Batch\ub294 \uc5b4\ub5a4 \uc2dc\uac04 \ub54c\uc5d0 \uba87 \uac1c\uc758 Batch\uac00 \ub3c4\ub294\uc9c0 \uc54c\uae30 \uc5b4\ub824\uc6cc, \uc790\uc6d0 \uad00\ub9ac\uac00 \uc5b4\ub835\ub2e4.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uac19\uc740 \ubb3c\ub9ac \uc11c\ubc84\uc5d0\uc11c \uc5ec\ub7ec Batch\uac00 \ub3d9\uc2dc\uc5d0 \ub3c8\ub2e4\uba74 OOM\uc744 \ubc1c\uc0dd\uc2dc\ud0ac \uc218\ub3c4 \uc788\ub2e4."))),(0,l.kt)("li",{parentName:"ul"},"Batch\ub294 \ud55c \ub3d9\uc791\uc5d0 \uac78\ub9ac\ub294 \uc2dc\uac04\uc774 \uae38\uae30 \ub54c\ubb38\uc5d0 \ub85c\uadf8\uae30 \ube48\uc57d\ud558\ub2e4.")),(0,l.kt)("h4",{id:"\ud574\uacb0-\ubc29\ubc95-spring-cloud-data-flow"},"\ud574\uacb0 \ubc29\ubc95: Spring Cloud Data Flow"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"K8s\uc640 \uc644\ubcbd\ud55c \uc5f0\ub3d9\uc73c\ub85c Batch \uc2e4\ud589 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158"),(0,l.kt)("li",{parentName:"ul"},"\uc720\uc6a9\ud55c \uc815\ubcf4 \uc2dc\uac01\uc801\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1")))}s.isMDXComponent=!0},8035:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/kakao-batch1-c770771c7bc537eb0925afb5a1596ae3.png"},7533:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/kakao-batch2-3c89e5e33b9ca5d27c3c75cd49a7b502.png"},7958:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/kakao-batch3-065d2267d89072130ff993e6f83ee19e.png"},6614:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/kakao-batch4-a53c30b70431f9599f89c553c9def0d0.png"},140:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/kakao-batch5-34ef6242145ae93870d0831ea77f82f2.png"},8229:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/kakao-batch6-85957054836b17069dc49b4f8d615d74.png"},2714:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/kakao-batch7-76ef6d8c4054c79b26b9332681acb19a.png"},5330:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/kakao-batch8-2d47dbbe1c148be10ac9e9dbdcffe2cd.png"}}]);