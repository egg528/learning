"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[5745],{9002:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>d});var r=l(4848),i=l(8453);const t={title:"5. \ub3d9\uc801 \ud504\ub85d\uc2dc \uae30\uc220",sidebar_position:5,tag:["lecture","spring advance"]},s=void 0,c={id:"lecture/spring-advance/5",title:"5. \ub3d9\uc801 \ud504\ub85d\uc2dc \uae30\uc220",description:"\ud604\uc7ac \ubb38\uc81c\uc810",source:"@site/docs/resource/lecture/spring-advance/5.md",sourceDirName:"lecture/spring-advance",slug:"/lecture/spring-advance/5",permalink:"/resource/lecture/spring-advance/5",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"5. \ub3d9\uc801 \ud504\ub85d\uc2dc \uae30\uc220",sidebar_position:5,tag:["lecture","spring advance"]},sidebar:"tutorialSidebar",previous:{title:"4. \ud504\ub85d\uc2dc \ud328\ud134",permalink:"/resource/lecture/spring-advance/4"},next:{title:"6. \uc2a4\ud504\ub9c1\uc774 \uc9c0\uc6d0\ud558\ub294 \ud504\ub85d\uc2dc",permalink:"/resource/lecture/spring-advance/6"}},a={},d=[{value:"\ud604\uc7ac \ubb38\uc81c\uc810",id:"\ud604\uc7ac-\ubb38\uc81c\uc810",level:2},{value:"\ud574\uacb0\ucc45",id:"\ud574\uacb0\ucc45",level:2},{value:"Java \ub9ac\ud50c\ub809\uc158",id:"java-\ub9ac\ud50c\ub809\uc158",level:2},{value:"\uc608\uc2dc 1",id:"\uc608\uc2dc-1",level:3},{value:"\uc608\uc2dc 2",id:"\uc608\uc2dc-2",level:3},{value:"\ub2e8\uc810",id:"\ub2e8\uc810",level:3},{value:"JDK \ub3d9\uc801 \ud504\ub85d\uc2dc",id:"jdk-\ub3d9\uc801-\ud504\ub85d\uc2dc",level:2},{value:"\uc608\uc2dc",id:"\uc608\uc2dc",level:3},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:3},{value:"\ub0a8\uc740 \ubb38\uc81c",id:"\ub0a8\uc740-\ubb38\uc81c",level:2},{value:"\uc608\uc81c",id:"\uc608\uc81c",level:3},{value:"JDK \ub3d9\uc801 \ud504\ub85d\uc2dc\uc758 \ud55c\uacc4",id:"jdk-\ub3d9\uc801-\ud504\ub85d\uc2dc\uc758-\ud55c\uacc4",level:3},{value:"CGLIB",id:"cglib",level:2},{value:"\uc608\uc81c - \ud504\ub85d\uc2dc \uac1d\uccb4",id:"\uc608\uc81c---\ud504\ub85d\uc2dc-\uac1d\uccb4",level:3},{value:"\uc608\uc81c - \uc778\ud130\ud398\uc774\uc2a4 \uc5c6\ub294 \ud074\ub798\uc2a4\uc5d0 \uc801\uc6a9 \ubd80\ubd84",id:"\uc608\uc81c---\uc778\ud130\ud398\uc774\uc2a4-\uc5c6\ub294-\ud074\ub798\uc2a4\uc5d0-\uc801\uc6a9-\ubd80\ubd84",level:3},{value:"\uc815\ub9ac",id:"\uc815\ub9ac-1",level:3}];function o(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\ud604\uc7ac-\ubb38\uc81c\uc810",children:"\ud604\uc7ac \ubb38\uc81c\uc810"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ub300\uc0c1 \ud074\ub798\uc2a4 \uc218 \ub9cc\ud07c \ub85c\uadf8 \ucd94\uc801\uc744 \uc704\ud55c \ud504\ub85d\uc2dc \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uc5b4\uc57c \ud568","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uac19\uc740 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\uba74\uc11c \uc2e4\uc81c \uac1d\uccb4\ub97c \ud544\ub4dc\ub85c \uac00\uc9c4 \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uc5b4\uc57c \ud588\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\ud558\uc9c0\ub9cc \ud504\ub85d\uc2dc \ud074\ub798\uc2a4\uc758 \uae30\ubcf8 \ucf54\ub4dc \ud750\ub984\uc740 \uac70\uc758 \uac19\uace0 \uc801\uc6a9 \ub300\uc0c1 \uc815\ub3c4\ub9cc \ucc28\uc774\uac00 \uc788\uc5c8\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ud574\uacb0\ucc45",children:"\ud574\uacb0\ucc45"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"JDK \ub3d9\uc801 \ud504\ub85d\uc2dc \uae30\uc220 / CGLIB \uac19\uc740 \ud504\ub85d\uc2dc \uc0dd\uc131 \uae30\uc220\uc744 \ud65c\uc6a9\ud558\uba74 \ud504\ub85d\uc2dc \uac1d\uccb4\ub97c \uacc4\uc18d \ub9cc\ub4e4\uc9c0 \uc548\ud558\ub3c4 \ub428"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"java-\ub9ac\ud50c\ub809\uc158",children:"Java \ub9ac\ud50c\ub809\uc158"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'log.info("start");\nString result = xxx(); //\ud638\ucd9c \ub300\uc0c1\uc774 \ub2e4\ub984, \ub3d9\uc801 \ucc98\ub9ac \ud544\uc694\nlog.info("result={}", result);\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uacf5\ud1b5 \ub85c\uc9c1\uacfc \uac1c\ubcc4 \uba54\uc11c\ub4dc\uac00 \uc788\ub2e4\uace0 \uac00\uc815\ud558\uc790"}),"\n",(0,r.jsx)(n.li,{children:"\uc774\ub54c 2\ubc88\uc9f8 \ub77c\uc778 \uc989, \ub9e4\ubc88 \ub2ec\ub77c\uc9c0\ub294 \ubd80\ubd84\uc744"}),"\n",(0,r.jsx)(n.li,{children:"\ud074\ub798\uc2a4 / \uba54\uc11c\ub4dc\uc758 \uba54\ud0c0 \uc815\ubcf4\ub97c \uc0ac\uc6a9\ud574 \ub3d9\uc801\uc73c\ub85c \ud638\ucd9c\ud560 \uc218 \uc788\ub294 \uae30\uc220\uc774 \ub9ac\ud50c\ub809\uc158\uc774\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc608\uc2dc-1",children:"\uc608\uc2dc 1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Test\n    void reflection1() throws Exception {\n        // \ud074\ub798\uc2a4 \uc815\ubcf4 (\ud574\ub2f9 \uacbd\ub85c\uc5d0 \uc874\uc7ac)\n        Class classHello =\n            Class.forName("hello.proxy.jdkdynamic.ReflectionTest$Hello");\n            \n        Hello target = new Hello(); \n        \n        // callA \uba54\uc11c\ub4dc \uc815\ubcf4\n        Method methodCallA = classHello.getMethod("callA");\n        Object result1 = methodCallA.invoke(target);\n        log.info("result1={}", result1);\n        \n        // callB \uba54\uc11c\ub4dc \uc815\ubcf4\n        Method methodCallB = classHello.getMethod("callB");\n        Object result2 = methodCallB.invoke(target); \n        log.info("result2={}", result2);\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc704\uc640 \uac19\uc774 \uacbd\ub85c\ub97c \ud1b5\ud574 Hello \ud074\ub798\uc2a4 \uba54\ud0c0 \uc815\ubcf4\ub97c \uac00\uc838\uc624\uace0"}),"\n",(0,r.jsxs)(n.li,{children:["getMethod\ub97c \uc0ac\uc6a9\ud574 \uba54\uc11c\ub4dc\uc758 \uba54\ud0c0\uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc788\ub2e4.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"target(Hello)\uc758 callA / callB\ub97c \uc2e4\ud589\uc2dc\ud0b4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\uc989, \ud074\ub798\uc2a4\ub098 \uba54\uc11c\ub4dc \uc815\ubcf4\ub97c \ub3d9\uc801\uc73c\ub85c \ubcc0\uacbd\ud560 \uc218 \uc788\ub2e4","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"callA() / callB()\ub97c \uc9c1\uc811 \ud638\ucd9c\ud558\ub294 \ubd80\ubd84\uc774 Method.invoke\ub85c \ub300\uccb4\ub428"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc608\uc2dc-2",children:"\uc608\uc2dc 2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Test\nvoid reflection2() throws Exception {\n      Class classHello =\n            Class.forName("hello.proxy.jdkdynamic.ReflectionTest$Hello");\n  \n  \n      Hello target = new Hello();\n      \n      Method methodCallA = classHello.getMethod("callA");\n      dynamicCall(methodCallA, target);\n      \n      Method methodCallB = classHello.getMethod("callB");\n      dynamicCall(methodCallB, target);\n}\n  \nprivate void dynamicCall(Method method, Object target) throws Exception {\n      log.info("start");\n      Object result = method.invoke(target);\n      log.info("result={}", result);\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ub9ac\ud50c\ub809\uc158\uc744 \ud65c\uc6a9\ud574 \uacf5\ud1b5 \ub85c\uc9c1\uacfc \uac1c\ubcc4 \ub85c\uc9c1\uc744 \ubd84\ub9ac\ud568","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uac1c\ubcc4 \ub85c\uc9c1\uc744 \ub9e4\uac1c\ubcc0\uc218\ub85c \ubc1b\ub294 \uba54\ud0c0\uc815\ubcf4\uc640 \uc801\uc6a9 \ub300\uc0c1 \uac1d\uccb4\ub974 \ub300\uccb4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\ub2e8\uc810",children:"\ub2e8\uc810"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ub9ac\ud50c\ub809\uc158\uc740 \ub7f0\ud0c0\uc784\uc5d0 \ub3d9\uc791\ud558\uae30\uc5d0 \ucef4\ud30c\uc77c \uc2dc\uc810\uc5d0 \uc624\ub958\ub97c \uc7a1\uc744 \uc218 \uc5c6\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"jdk-\ub3d9\uc801-\ud504\ub85d\uc2dc",children:"JDK \ub3d9\uc801 \ud504\ub85d\uc2dc"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud504\ub85d\uc2dc \uac1d\uccb4\ub97c \ub7f0\ud0c0\uc784\uc5d0 \ub9cc\ub4e4\uc5b4\uc900\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"\uc774 \uac1d\uccb4\ub97c \uc0ac\uc6a9\ud574 \uc6d0\ud558\ub294 \uc2e4\ud589 \ub85c\uc9c1\uc744 \uc9c0\uc815\ud558\uc5ec \uc2e4\ud589\ud560 \uc218 \uc788\uc74c"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc608\uc2dc",children:"\uc608\uc2dc"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// interface \npublic interface AInterface {\n    String call();\n}\n\n// \uad6c\ud604\uccb4\n@Slf4j\npublic class AImpl implements AInterface {\n    @Override\n    public String call() {\n        log.info("A \ud638\ucd9c");\n        return "a";\n    }\n}\n\n// \uacf5\ud1b5 \ub85c\uc9c1\n@Slf4j\npublic class TimeInvocationHandler implements InvocationHandler {\n\n    private final Object target;\n\n    public TimeInvocationHandler(Object target) {\n        this.target = target;\n    }\n\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        log.info("TimeProxy \uc2e4\ud589");\n        long startTime = System.currentTimeMillis();\n\n        Object result = method.invoke(target, args);\n\n        long endTime = System.currentTimeMillis();\n        long resultTime = endTime - startTime;\n        log.info("TimeProxy \uc885\ub8cc resultTime={}", resultTime);\n        return result;\n    }\n}\n\n// \uc2e4\ud589\n@Test\nvoid dynamicA() {\n    AInterface target = new AImpl();\n    TimeInvocationHandler handler = new TimeInvocationHandler(target);\n\n    AInterface proxy = (AInterface) Proxy.newProxyInstance(AInterface.class.getClassLoader(), new Class[]{AInterface.class}, handler);\n\n    proxy.call();\n    log.info("targetClass={}", target.getClass());\n    log.info("proxyClass={}", proxy.getClass());\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\uc774\uc804 \uac15\uc758\uc5d0\uc11c \ud504\ub85d\uc2dc\ub97c \uc0dd\uc131\ud560 \ub54c","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc778\ud130\ud398\uc774\uc2a4 - \uad6c\ud604\uccb4\uac00 \uc788\uc744 \ub584 \ud504\ub85d\uc2dc \uac1d\uccb4\ub294 \uac19\uc740 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\uba74\uc11c \uad6c\ud604\uccb4\ub97c \ud544\ub4dc\ub85c \uac00\uc9c0\uace0 \uc788\uc5c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\uc704 \uc608\uc2dc\uc5d0\uc11c ",(0,r.jsx)(n.code,{children:"TimeInvocationHandler"})," \ub531 \ud504\ub85d\uc2dc \uac1d\uccb4\uc774\ub2e4."]}),"\n",(0,r.jsxs)(n.li,{children:["\ub9c8\uc9c0\ub9c9 \ud14c\uc2a4\ud2b8 \uc608\uc2dc\ub97c \ud655\uc778\ud558\uba74","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"java.lang.reflect.Proxy\ub97c \ud65c\uc6a9\ud558\uba74 \ub9e4\uac1c\ubcc0\uc218\ub85c \ubc1b\uc740 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uae30\ubc18\uc73c\ub85c \ub3d9\uc801 \ud504\ub85d\uc2dc\ub97c \uc0dd\uc131\ud55c\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"\ud574\ub2f9 \uac1d\uccb4\ub97c \uc2e4\ud589\ud558\uba74 \uc2e4\uc81c \uac1d\uccb4\uc640 \ub611\uac19\uc774 \uae30\ub2a5\ud558\uc9c0\ub9cc"}),"\n",(0,r.jsx)(n.li,{children:"JDK \ub3d9\uc801 \ud504\ub85d\uc2dc\uac00 \ub9cc\ub4e0 \ud504\ub85d\uc2dc \uac1d\uccb4\uc774\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.img,{alt:"jdk_proxy.png",src:l(9139).A+"",width:"1158",height:"506"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc815\ub9ac",children:"\uc815\ub9ac"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"proxy.png",src:l(9235).A+"",width:"1184",height:"992"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"AImpl\uc5d0 \ub300\ud55c \ud504\ub85d\uc2dc\ub97c \ub9cc\ub4e0 \uc801 \uc5c6\ub2e4."}),"\n",(0,r.jsxs)(n.li,{children:["\uacf5\ud1b5 \ub85c\uc9c1\uc744 \uac00\uc9c4 TimeInvocationHandler\uac00 \uc788\uace0 \uc801\uc6a9\ud558\uace0 \uc2f6\uc740 \uac1d\uccb4(AImpl)\uc5d0 \uc801\uc6a9\ud55c \uac83 \ubfd0\uc774\ub2e4.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TimeInvocationHandler\uc640 AImpl\uc740 \uac19\uc740 \uacf5\ud1b5 interface\ub97c \uad6c\ud604\ud558\uace0 \uc788\uc9c0 \uc54a\uc74c"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\uc989, JDK \ub3d9\uc801 \ud504\ub85d\uc2dc\ub97c \uc774\uc6a9\ud558\uba74 \uacf5\ud1b5 \ub85c\uc9c1\uc744 \uad6c\ud604\ud55c \ud074\ub798\uc2a4(TimeInvocationHandler\uc640) 1\uac1c\ub97c \uc6d0\ud558\ub294 \uac1d\uccb4 N\uac1c\uc5d0 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uacf5\ud1b5 \ub85c\uc9c1\uc740 InvocationHandler\ub97c \uad6c\ud604\ud55c \ud074\ub798\uc2a4\ub85c \ub9cc\ub4e4\uba74 \ub428"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ub0a8\uc740-\ubb38\uc81c",children:"\ub0a8\uc740 \ubb38\uc81c"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc774\ub807\uac8c \uad6c\ud604\ud558\uba74 \uad6c\ud604\uccb4\uc758 \ubaa8\ub4e0 \uba54\uc11c\ub4dc\uc5d0 \uacf5\ud1b5 \ub85c\uc9c1\uc774 \uc801\uc6a9\ub41c\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"\uc6d0\ud558\ub294 \uba54\uc11c\ub4dc\uc5d0\ub9cc \uacf5\ud1b5 \ub85c\uc9c1\uc774 \uc801\uc6a9\ub418\uac8c \ud558\ub824\uba74..?"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc608\uc81c",children:"\uc608\uc81c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class LogTraceFilterHandler implements InvocationHandler {\n\n    private final Object target;\n    private final LogTrace logTrace;\n    private final String[] patterns;\n\n    public LogTraceFilterHandler(Object target, LogTrace logTrace, String[] patterns) {\n        this.target = target;\n        this.logTrace = logTrace;\n        this.patterns = patterns;\n    }\n\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n\n        //\uba54\uc11c\ub4dc \uc774\ub984 \ud544\ud130\n        String methodName = method.getName();\n        if (!PatternMatchUtils.simpleMatch(patterns, methodName)) {\n            return method.invoke(target, args);\n        }\n\n        TraceStatus status = null;\n        try {\n            String message = method.getDeclaringClass().getSimpleName() + "." +\n                    method.getName() + "()";\n            status = logTrace.begin(message);\n\n            //\ub85c\uc9c1 \ud638\ucd9c\n            Object result = method.invoke(target, args);\n            logTrace.end(status);\n            return result;\n        } catch (Exception e) {\n            logTrace.exception(status, e);\n            throw e;\n        }\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["invoke \uba54\uc11c\ub4dc \uad6c\ud604\ubd80\ub97c \ubcf4\uba74 \uc2a4\ud504\ub9c1\uc774 \uc81c\uacf5\ud558\ub294 PatternMatchUtils\ub97c \ud65c\uc6a9\ud568","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uacf5\ud1b5 \ub85c\uc9c1 \uc801\uc6a9 \uc5ec\ubd80\ub97c \uba54\uc11c\ub4dc \uba85\uc73c\ub85c \uad6c\ubd84\ud558\uac8c \ub428"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"jdk-\ub3d9\uc801-\ud504\ub85d\uc2dc\uc758-\ud55c\uacc4",children:"JDK \ub3d9\uc801 \ud504\ub85d\uc2dc\uc758 \ud55c\uacc4"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uad6c\ud604\ud55c \uac83\ub4e4\uc744 \ubcf4\uba74 \uc54c \uc218 \uc788\uc9c0\ub9cc"}),"\n",(0,r.jsxs)(n.li,{children:["\uc778\ud130\ud398\uc774\uc2a4\uac00 \ud544\uc218\uc784.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\uc778\ud130\ud398\uc774\uc2a4 \uc815\ubcf4\ub97c ",(0,r.jsx)(n.code,{children:"Proxy.newProxyInstance()"}),"\uc5d0 \ub118\uaca8\uc918\uc57c \ud568"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cglib",children:"CGLIB"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ubc14\uc774\ud2b8\ucf54\ub4dc\ub97c \uc870\uc791\ud574\uc11c \ub3d9\uc801\uc73c\ub85c \ud074\ub798\uc2a4\ub97c \uc0dd\uc131\ud558\ub294 \uae30\uc220","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc778\ud130\ud398\uc774\uc2a4 \ud544\uc694 X"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\uc2a4\ud504\ub9c1 \ub0b4\ubd80 \uc18c\uc2a4\ucf54\ub4dc\uc5d0 \ud3ec\ud568\ub418\uc5b4 \uc788\uc74c"}),"\n",(0,r.jsx)(n.li,{children:"\uc2e4\uc81c\ub85c CGLIB\uc744 \uc9c1\uc811 \uc0ac\uc6a9\ud558\uc9c0\ub294 \uc54a\uace0 \ub300\uac1c ProxyFactory\ub97c \uc0ac\uc6a9\ud568"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc608\uc81c---\ud504\ub85d\uc2dc-\uac1d\uccb4",children:"\uc608\uc81c - \ud504\ub85d\uc2dc \uac1d\uccb4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'\n@Slf4j\npublic class TimeMethodInterceptor implements MethodInterceptor {\n\n    private final Object target;\n\n    public TimeMethodInterceptor(Object target) {\n        this.target = target;\n    }\n\n    @Override\n    public Object intercept(Object obj, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {\n        log.info("TimeProxy \uc2e4\ud589");\n        long startTime = System.currentTimeMillis();\n\n        Object result = methodProxy.invoke(target, args);\n\n        long endTime = System.currentTimeMillis();\n        long resultTime = endTime - startTime;\n        log.info("TimeProxy \uc885\ub8cc resultTime={}", resultTime);\n        return result;\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"object\ub294 \uc2e4\ud589\uc2dc\ud0ac \ub300\uc0c1 \uac1d\uccb4"}),"\n",(0,r.jsx)(n.li,{children:"MethodInterceptor\ub97c \uad6c\ud604\ud558\uc5ec CGLIB \uc2e4\ud589 \ub85c\uc9c1\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc74c"}),"\n",(0,r.jsxs)(n.li,{children:["\ub85c\uc9c1\uc744 \ubcf4\uba74 method \ub300\uc2e0 methodProxy\ub97c \uc0ac\uc6a9\ud588\ub294\ub370","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc131\ub2a5\uc0c1 methodProxy \uc0ac\uc6a9\uc744 \uad8c\uc7a5\ud568"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc608\uc81c---\uc778\ud130\ud398\uc774\uc2a4-\uc5c6\ub294-\ud074\ub798\uc2a4\uc5d0-\uc801\uc6a9-\ubd80\ubd84",children:"\uc608\uc81c - \uc778\ud130\ud398\uc774\uc2a4 \uc5c6\ub294 \ud074\ub798\uc2a4\uc5d0 \uc801\uc6a9 \ubd80\ubd84"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'    @Test\n    void cglib() {\n        ConcreteService target = new ConcreteService();\n\n        Enhancer enhancer = new Enhancer();\n        enhancer.setSuperclass(ConcreteService.class);\n        enhancer.setCallback(new TimeMethodInterceptor(target));\n        ConcreteService proxy = (ConcreteService) enhancer.create();\n        log.info("targetClass={}", target.getClass());\n        log.info("proxyClass={}", proxy.getClass());\n\n        proxy.call();\n    }\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enhancer\ub97c \uc0ac\uc6a9\ud574 \ud504\ub85d\uc2dc\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"setSuperClass: \uc0c1\uc18d\uc744 \ud1b5\ud55c \ud504\ub85d\uc2dc \uc0dd\uc131"}),"\n",(0,r.jsx)(n.li,{children:"setCallback: \uc2e4\ud589 \ub85c\uc9c1 \ud560\uc0c1"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc815\ub9ac-1",children:"\uc815\ub9ac"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"cglib.png",src:l(7568).A+"",width:"1202",height:"822"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc0c1\uc18d\uc744 \ud1b5\ud55c \ud504\ub85d\uc2dc \uac1d\uccb4 \uc0dd\uc131"}),"\n",(0,r.jsxs)(n.li,{children:["\uc0c1\uc18d\uc5d0\uc11c \uc624\ub294 \ub2e8\uc810\ub4e4","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ubd80\ubaa8 \ud074\ub798\uc2a4\uc758 \uc0dd\uc131\uc790\ub97c \uccb4\ud06c\ud574\uc57c \ud568.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ub300\uc0c1 \uac1d\uccb4\uc5d0 \uae30\ubcf8 \uc0dd\uc131\uc790\uac00 \ud544\uc694\ud558\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\ud074\ub798\uc2a4\uc5d0 final \ud0a4\uc6cc\ub4dc\uac00 \ubd99\uc73c\uba74 \uc0c1\uc18d\uc774 \ubd88\uac00\ub2a5\ud558\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"\uba54\uc11c\ub4dc\uc5d0 final \ud0a4\uc6cc\ub4dc\uac00 \ubd99\uc73c\uba74 \ud574\ub2f9 \uba54\uc11c\ub4dc\ub97c \uc624\ubc84\ub77c\uc774\ub529 \ud560 \uc218 \uc5c6\ub2e4."}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},7568:(e,n,l)=>{l.d(n,{A:()=>r});const r=l.p+"assets/images/cglib-2178dfb811ef79e679eed21ada8d95e0.png"},9139:(e,n,l)=>{l.d(n,{A:()=>r});const r=l.p+"assets/images/jdk_proxy-2e79f4e0f84b249bee7697dd814d79de.png"},9235:(e,n,l)=>{l.d(n,{A:()=>r});const r=l.p+"assets/images/proxy-de8a0ff3a003ae9bb7b7dfd8d0b2f620.png"},8453:(e,n,l)=>{l.d(n,{R:()=>s,x:()=>c});var r=l(6540);const i={},t=r.createContext(i);function s(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);