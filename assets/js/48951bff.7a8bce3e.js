"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9330],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>v});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),o=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=o(e.components);return r.createElement(u.Provider,{value:t},e.children)},s="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,u=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),s=o(n),m=a,v=s["".concat(u,".").concat(m)]||s[m]||d[m]||l;return n?r.createElement(v,i(i({ref:t},p),{},{components:n})):r.createElement(v,i({ref:t},p))}));function v(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=m;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c[s]="string"==typeof e?e:a,i[1]=c;for(var o=2;o<l;o++)i[o]=n[o];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7827:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>c,toc:()=>o});var r=n(7462),a=(n(7294),n(3905));const l={title:"2. \ud15c\ud50c\ub9bf \uba54\uc11c\ub4dc \ud328\ud134",sidebar_position:2,tag:["lecture","spring advance"]},i=void 0,c={unversionedId:"lecture/spring-advance/two",id:"lecture/spring-advance/two",title:"2. \ud15c\ud50c\ub9bf \uba54\uc11c\ub4dc \ud328\ud134",description:"\ud604\uc7ac \ucf54\ub4dc\uc758 \ubb38\uc81c\uc810",source:"@site/docs/resource/lecture/spring-advance/two.md",sourceDirName:"lecture/spring-advance",slug:"/lecture/spring-advance/two",permalink:"/resource/lecture/spring-advance/two",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"2. \ud15c\ud50c\ub9bf \uba54\uc11c\ub4dc \ud328\ud134",sidebar_position:2,tag:["lecture","spring advance"]},sidebar:"tutorialSidebar",previous:{title:"1. \uc4f0\ub808\ub4dc \ub85c\uceec - ThreadLocal",permalink:"/resource/lecture/spring-advance/one"},next:{title:"3. \uc804\ub7b5 \ud328\ud134",permalink:"/resource/lecture/spring-advance/three"}},u={},o=[{value:"\ud604\uc7ac \ucf54\ub4dc\uc758 \ubb38\uc81c\uc810",id:"\ud604\uc7ac-\ucf54\ub4dc\uc758-\ubb38\uc81c\uc810",level:2},{value:"\ud15c\ud50c\ub9bf \uba54\uc11c\ub4dc \ud328\ud134",id:"\ud15c\ud50c\ub9bf-\uba54\uc11c\ub4dc-\ud328\ud134",level:2},{value:"\uc5b8\uc81c",id:"\uc5b8\uc81c",level:3},{value:"\ud6a8\uacfc",id:"\ud6a8\uacfc",level:3},{value:"\uc5b4\ub5bb\uac8c",id:"\uc5b4\ub5bb\uac8c",level:3},{value:"1. \ucd94\uc0c1 \ud074\ub798\uc2a4\uc640 \uc0c1\uc18d",id:"1-\ucd94\uc0c1-\ud074\ub798\uc2a4\uc640-\uc0c1\uc18d",level:5},{value:"2. \ucd94\uc0c1 \ud074\ub798\uc2a4\uc640 \uc775\uba85 \ub0b4\ubd80 \ud074\ub798\uc2a4 \uc774\uc6a9\ud558\uae30",id:"2-\ucd94\uc0c1-\ud074\ub798\uc2a4\uc640-\uc775\uba85-\ub0b4\ubd80-\ud074\ub798\uc2a4-\uc774\uc6a9\ud558\uae30",level:4},{value:"\ub2e8\uc810",id:"\ub2e8\uc810",level:3},{value:"\ub514\uc790\uc778 \ud328\ud134\uc744 \ud1b5\ud55c \ubb38\uc81c\uc810 \ud574\uacb0",id:"\ub514\uc790\uc778-\ud328\ud134\uc744-\ud1b5\ud55c-\ubb38\uc81c\uc810-\ud574\uacb0",level:2},{value:"ETC",id:"etc",level:2},{value:"\uc88b\uc740 \uc124\uacc4\ub780?",id:"\uc88b\uc740-\uc124\uacc4\ub780",level:3},{value:"\ub2e8\uc77c \ucc45\uc784 \uc6d0\uce59(SRP)",id:"\ub2e8\uc77c-\ucc45\uc784-\uc6d0\uce59srp",level:3}],p={toc:o},s="wrapper";function d(e){let{components:t,...l}=e;return(0,a.kt)(s,(0,r.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\ud604\uc7ac-\ucf54\ub4dc\uc758-\ubb38\uc81c\uc810"},"\ud604\uc7ac \ucf54\ub4dc\uc758 \ubb38\uc81c\uc810"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'public void orderItem(TraceId traceId, String itemId) {\n\n  TraceStatus status = null;\n  try {\n    status = trace.begin("OrderService.orderItem()") // \ub85c\uadf8\ub97c \uc704\ud55c \ucf54\ub4dc\n    orderRepository.save(status.getTraceId(), itemId);\n    trace.end(status); // \ub85c\uadf8\ub97c \uc704\ud55c \ucf54\ub4dc\n  } catch (Exception e) {  // \ub85c\uadf8\ub97c \uc704\ud55c \ucf54\ub4dc\n    trace.exception(status, e); // \ub85c\uadf8\ub97c \uc704\ud55c \ucf54\ub4dc\n    throw e; // \ub85c\uadf8\ub97c \uc704\ud55c \ucf54\ub4dc\n  }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub85c\uceec \uc4f0\ub808\ub4dc\ub97c \ud65c\uc6a9\ud574 \uba40\ud2f0 \uc4f0\ub808\ub4dc \ud658\uacbd\uc5d0\uc11c\ub3c4 \uc815\uc0c1 \ub3d9\uc791\ud558\ub294 \ub85c\uadf8 \ucd94\uc801\uae30\ub97c \ub9cc\ub4e4\uc5c8\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\ud558\uc9c0\ub9cc \ub85c\uadf8 \ucd94\uc801\uae30\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud574 ",(0,a.kt)("inlineCode",{parentName:"li"},"\ud575\uc2ec \ub85c\uc9c1 \uc774\uc678\uc758 \ucf54\ub4dc\ub97c")," \ub2f4\uace0\uc788\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\uc989, \ud575\uc2ec \uae30\ub2a5\uacfc \ubd80\uac00 \uae30\ub2a5\uc774 \ud63c\uc7ac\ud558\ub294 \ucf54\ub4dc\uc774\ub2e4.")),(0,a.kt)("h2",{id:"\ud15c\ud50c\ub9bf-\uba54\uc11c\ub4dc-\ud328\ud134"},"\ud15c\ud50c\ub9bf \uba54\uc11c\ub4dc \ud328\ud134"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"template.png",src:n(5722).Z,width:"1064",height:"864"})),(0,a.kt)("h3",{id:"\uc5b8\uc81c"},"\uc5b8\uc81c"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc804\uccb4\uc801\uc73c\ub85c \ub3d9\uc77c\ud558\uc9c0\ub9cc \uc77c\ubd80\ub9cc \ub2e4\ub978 \uad6c\ubb38\uc774 \uacf3\uacf3\uc5d0 \uc874\uc7ac\ud560 \ub54c")),(0,a.kt)("h3",{id:"\ud6a8\uacfc"},"\ud6a8\uacfc"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ucf54\ub4dc \uc911\ubcf5\uc744 \uc904\uc77c \uc218 \uc788\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\ubc18\ubcf5\ub418\ub294 \ucf54\ub4dc\uac00 \ubd80\uac00 \uae30\ub2a5\uc77c \uacbd\uc6b0 \ud575\uc2ec \ub85c\uc9c1\ub9cc \ub0a8\uae38 \uc218 \uc788\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\uacf5\ud1b5 \ub85c\uc9c1\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\ud560 \uc218 \uc788\ub2e4.")),(0,a.kt)("h3",{id:"\uc5b4\ub5bb\uac8c"},"\uc5b4\ub5bb\uac8c"),(0,a.kt)("h5",{id:"1-\ucd94\uc0c1-\ud074\ub798\uc2a4\uc640-\uc0c1\uc18d"},"1. \ucd94\uc0c1 \ud074\ub798\uc2a4\uc640 \uc0c1\uc18d"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Slf4j\npublic abstract class AbstractTemplate {\n\n    public void execute() {\n        long startTime = System.currentTimeMillis();\n        //\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uc2e4\ud589\n        call(); //\uc0c1\uc18d\n        //\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uc885\ub8cc\n        long endTime = System.currentTimeMillis();\n        long resultTime = endTime - startTime;\n        log.info("resultTime={}", resultTime);\n    }\n\n    protected abstract void call();\n}\n\n@Slf4j\npublic class SubClassLogic1 extends AbstractTemplate {\n    @Override\n    protected void call() {\n        log.info("\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c11 \uc2e4\ud589");\n    }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ucd94\uc0c1 \ud074\ub798\uc2a4\uc5d0 \ubc18\ubcf5\ub418\ub294 \ubd80\ubd84\uacfc \ubcc0\ud558\ub294 \ubd80\ubd84\uc744 \ubd84\ub9ac\ub41c \uba54\uc11c\ub4dc\ub85c \uac00\uc9c0\uace0 \uc788\ub294\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\ud544\uc694\ud560 \ub54c\ub9c8\ub2e4 \ucd94\uc0c1 \ud074\ub798\uc2a4\ub97c \uc0c1\uc18d\ud558\ub294 \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uc5b4 \ub2ec\ub77c\uc9c0\ub294 \ubd80\ubd84\ub9cc \uad6c\ud604\ud558\uace0 \uc0ac\uc6a9\ud55c\ub2e4.")),(0,a.kt)("h4",{id:"2-\ucd94\uc0c1-\ud074\ub798\uc2a4\uc640-\uc775\uba85-\ub0b4\ubd80-\ud074\ub798\uc2a4-\uc774\uc6a9\ud558\uae30"},"2. \ucd94\uc0c1 \ud074\ub798\uc2a4\uc640 \uc775\uba85 \ub0b4\ubd80 \ud074\ub798\uc2a4 \uc774\uc6a9\ud558\uae30"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'    @Test\n    void templateMethodV2() {\n        AbstractTemplate template1 = new AbstractTemplate() {\n            @Override\n            protected void call() {\n                log.info("\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c11 \uc2e4\ud589");\n            }\n        };\n        log.info("\ud074\ub798\uc2a4 \uc774\ub9841={}", template1.getClass());\n        template1.execute();\n\n        AbstractTemplate template2 = new AbstractTemplate() {\n            @Override\n            protected void call() {\n                log.info("\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c12 \uc2e4\ud589");\n            }\n        };\n        log.info("\ud074\ub798\uc2a4 \uc774\ub9842={}", template2.getClass());\n        template2.execute();\n    }\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc775\uba85 \ub0b4\ubd80 \ud074\ub798\uc2a4\ub97c \uc774\uc6a9\ud558\uc5ec \ud074\ub798\uc2a4 \uc815\uc758 \uc5c6\uc774 \uadf8\ub584 \uadf8\ub54c \ub9cc\ub4e4\uc5b4\uc11c \uc0ac\uc6a9\ud560 \uc218\ub3c4 \uc788\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\ub2e8, \uc774 \uacbd\uc6b0 \ud074\ub798\uc2a4 \uc7ac\uc0ac\uc6a9\uc740 \ubd88\uac00")),(0,a.kt)("h3",{id:"\ub2e8\uc810"},"\ub2e8\uc810"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc0c1\uc18d\uc744 \uc0ac\uc6a9\ud558\uae30\uc5d0 \uc0c1\uc18d\uc774 \uac00\uc9c0\ub294 \ubb38\uc81c\ub97c \uace0\uc2a4\ub780\ud788 \uc548\uace0 \uac00\uc57c\ud55c\ub2e4.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uc790\uc2dd \ud074\ub798\uc2a4\ub294 \ubd80\ubaa8 \ud074\ub798\uc2a4\uc758 \ucf54\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc9c0\ub9cc, ",(0,a.kt)("inlineCode",{parentName:"li"},"\ubd80\ubaa8 - \uc790\uc2dd \ud074\ub798\uc2a4 \uc0ac\uc774\uc5d0 \uac15\ud55c \uc758\uc874\uc131\uc774 \uc0dd\uae34\ub2e4."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uac15\ud55c \uc758\uc874 = \uc790\uc2dd \ud074\ub798\uc2a4\ub294 \ubd80\ubaa8 \ud074\ub798\uc2a4\uc758 \ubaa8\ub4e0 \ucf54\ub4dc\ub97c \uac00\uc9c0\uac8c \ub41c\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\uc0c1\uc18d\uc774\ub77c\ub294 \uac1c\ub150\uc5d0 \ubd80\ud569\ud558\uc9c0 \uc54a\uace0 \uc798\ubabb\ub41c \uc758\uc874 \uad00\uacc4\uc774\uace0 "),(0,a.kt)("li",{parentName:"ul"},"\ubd80\ubaa8\ucf54\ub4dc\uc758 \uc218\uc815 \uc790\uc2dd\uc774 \uc601\ud5a5\uc744 \uc904 \uc218 \uc788\uc74c"),(0,a.kt)("li",{parentName:"ul"})))))),(0,a.kt)("h2",{id:"\ub514\uc790\uc778-\ud328\ud134\uc744-\ud1b5\ud55c-\ubb38\uc81c\uc810-\ud574\uacb0"},"\ub514\uc790\uc778 \ud328\ud134\uc744 \ud1b5\ud55c \ubb38\uc81c\uc810 \ud574\uacb0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public abstract class AbstractTemplate<T> {\n\n    private final LogTrace trace;\n\n    public AbstractTemplate(LogTrace trace) {\n        this.trace = trace;\n    }\n\n    public T execute(String message) {\n\n        TraceStatus status = null;\n        try {\n            status = trace.begin(message);\n            //\ub85c\uc9c1 \ud638\ucd9c\n            T result = call();\n\n            trace.end(status);\n            return result;\n        } catch (Exception e) {\n            trace.exception(status, e);\n            throw e;\n        }\n    }\n\n    protected abstract T call();\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ubc18\ubcf5\ub418\ub294 \ub85c\uadf8 \ucd94\uc801 \ud30c\ud2b8\ub294 \uad6c\ud604\ub41c \uba54\uc11c\ub4dc\ub85c"),(0,a.kt)("li",{parentName:"ul"},"\ub9e4\ubc88 \ubc14\ub00c\ub294 \ud575\uc2ec \uae30\ub2a5\uc740 \ucd94\uc0c1 \uba54\uc11c\ub4dc\ub85c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'    public void orderItem(String itemId) {\n\n        AbstractTemplate<Void> template = new AbstractTemplate<>(trace) {\n            @Override\n            protected Void call() {\n                orderRepository.save(itemId);\n                return null;\n            }\n        };\n        template.execute("OrderService.orderItem()");\n\n    }\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc775\uba85 \ub0b4\ubd80 \ud074\ub798\uc2a4\ub97c \ud65c\uc6a9\ud574 \ub85c\uadf8 \ucd94\uc801\ud558\ub294 \ud30c\ud2b8\ub97c \uc81c\uac70\ud560 \uc218 \uc788\uc5c8\uc74c.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uc989, \ud575\uc2ec \uae30\ub2a5\uc5d0 \uc9d1\uc911\ud558\ub294 \ucf54\ub4dc\uac00 \ub428.")))),(0,a.kt)("h2",{id:"etc"},"ETC"),(0,a.kt)("h3",{id:"\uc88b\uc740-\uc124\uacc4\ub780"},"\uc88b\uc740 \uc124\uacc4\ub780?"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc88b\uc740 \uc124\uacc4\ub294 \ubcc0\uacbd\uc774 \uc0dd\uae38 \ub54c \uc54c \uc218 \uc788\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\ub9cc\uc57d \ud15c\ud50c\ub9bf \uba54\uc11c\ub4dc \ud328\ud134\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\uc5d0\uc11c \ub85c\uadf8 \ucd94\uc801 \ud30c\ud2b8\ub97c \ubcc0\uacbd\ud574\uc57c \ud55c\ub2e4\uba74?",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ub85c\uadf8 \ucd94\uc801 \ud30c\ud2b8\ub97c \ucc3e\uc544\ub2e4\ub2c8\uba70 \ubaa8\ub450 \uc218\uc815\ud574\uc918\uc57c \ud55c\ub2e4."),(0,a.kt)("li",{parentName:"ul"},"\ubc18\uba74 \ud15c\ud50c\ub9bf \uba54\uc11c\ub4dc \ud328\ud134\uc744 \uc0ac\uc6a9\ud588\ub2e4\uba74 \ucd94\uc0c1 \ud074\ub798\uc2a4\ub9cc \uc218\uc815\ud558\uba74 \ubaa8\ub450 \uc801\uc6a9\ub428")))),(0,a.kt)("h3",{id:"\ub2e8\uc77c-\ucc45\uc784-\uc6d0\uce59srp"},"\ub2e8\uc77c \ucc45\uc784 \uc6d0\uce59(SRP)"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub514\uc790\uc778 \ud328\ud134\uc744 \ud1b5\ud574 \uc18c\uc2a4 \ucf54\ub4dc\ub97c \uba87 \uc904 \uc904\uc778 \uac83\ubcf4\ub2e4 \ubcc0\uacbd \uc9c0\uc810\uc744 \ubaa8\uc740 \uac83\uc774 \ub354 \uc911\uc694\ud55c \uacb0\uacfc\uc774\ub2e4.")))}d.isMDXComponent=!0},5722:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/template-6d94cf20a4dd8271b3382ff9ba510764.png"}}]);